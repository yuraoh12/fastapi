<script>
	//let message;

	/*
	fetch("http://127.0.0.1:8000/hello").then((res) => {
		res.json().then((json) => {
			message = json.message;
		})
	})
	*/
	async function hello() {
		const res = await fetch("http://127.0.0.1:8000/hello");
		const json = await res.json();

		if (res.ok) {
			return json.message;
		} else {
			alert("error");
		}
	}

	let promise = hello();
</script>

{#await promise}
	<p>... waiting</p>
{:then message} 
	<h1>{message}</h1>
{/await}
<h1>hihi</h1>